"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[398],{2398:function(e,t,r){r.r(t);var s=r(5893),n=r(1701),a=r(7294),c=r(1796),u=r.n(c),l=r(9352),i=r(9583),o=r(58),d=r(157),p=r(2177);t.default=function(e){var t;let{message:r}=e,[{currentChatUser:c,userInfo:f}]=(0,n.C4)(),[x,m]=(0,a.useState)(null),[g,h]=(0,a.useState)(!1),[v,j]=(0,a.useState)(!1),[b,S]=(0,a.useState)(0),[k,w]=(0,a.useState)(0),C=(0,a.useRef)(null),N=(0,a.useRef)(null);(0,a.useEffect)(()=>(null===N.current&&(N.current=u().create({container:C.current,waveColor:"#ccc",progressColor:"#4a9eff",cursorColor:"#7ae3c3",barWidth:2,height:30,responsive:!0}),N.current.on("finish",()=>{h(!1)})),()=>{N.current.destroy()}),[]),(0,a.useEffect)(()=>{let e="".concat(o.M5,"/").concat(r.message),t=new Audio(e);m(t),j(!0),N.current.load(e),N.current.on("ready",()=>{w(N.current.getDuration())})},[r.message]);let y=()=>{x&&(N.current.stop(),N.current.play(),x.play(),h(!0))},E=()=>{x&&(N.current.stop(),x.pause(),h(!1))};return(0,a.useEffect)(()=>{if(x){let e=()=>{S(x.currentTime)};return x.addEventListener("timeupdate",e),()=>{x.removeEventListener("timeupdate",e)}}},[x]),(0,s.jsxs)("div",{className:"flex items-center gap-5 text-white px-4 pr-2 py-4 text-sm rounded-md    ".concat(r.senderId===c.id?"bg-incoming-background":"bg-outgoing-background"),children:[(0,s.jsx)("div",{children:(0,s.jsx)(l.Z,{type:"lg",image:null==c?void 0:c.profilePicture})}),(0,s.jsx)("div",{className:"cursor-pointer text-xl",children:g?(0,s.jsx)(i.JuG,{onClick:E}):(0,s.jsx)(i.gmG,{onClick:y})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-60",ref:C}),(0,s.jsxs)("div",{className:"text-bubble-meta text-[11px] pt-1  flex justify-between absolute bottom-[-22px] w-full ",children:[(0,s.jsx)("span",{children:(t=g?b:k,"".concat(Math.floor(t/60).toString().padStart(2,"0"),":").concat(Math.floor(t%60).toString().padStart(2,"0")))}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("span",{children:(0,d.O)(r.createdAt)}),r.senderId===f.id&&(0,s.jsx)(p.Z,{messageStatus:r.messageStatus})]})]})]})]})}}}]);